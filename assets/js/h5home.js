// Generated by CoffeeScript 1.7.1
(function() {
  $(document).ready(function() {
    var roundNumber;
    $("#login").load("http://" + document.domain + "/siema/index.php/login/login_window");
    $("#login").hide();
    $("#map").show();
    $('#addMeModal').modal({
      keyboard: false,
      backdrop: false,
      show: true
    });
    $("#addMeModal").draggable({
      handle: ".modal-header"
    });
    $('.selectpicker').selectpicker();
    $(".dropdown-menu input, .dropdown-menu label").click(function(e) {
      return e.stopPropagation();
    });
    $(".navbar a").on("click", function(event) {
      var where;
      $(".nav-collapse a").parent().removeClass("active");
      $(this).parent().addClass("active");
      if ($(this).prop("id") === "btn-map") {
        $("#dash").hide();
        $("#login").hide();
        $("#map").show();
        $("#manag").hide();
        if (H5.Data.changed) {
          if (H5.Data.state === "Todos") {
            where = "ano='" + H5.Data.selectedYear + "'";
          } else {
            where = "estado='" + H5.Data.state + "' AND ano='" + H5.Data.selectedYear + "'";
          }
          H5.Map.layer.alerta.setOptions({
            where: where
          });
          H5.Map.layer.clusters.setOptions({
            where: where
          });
          H5.Map.layer.alerta.redraw();
          H5.Map.layer.clusters.redraw();
          H5.Data.changed = false;
        }
      } else if ($(this).prop("id") === "btn-charts") {
        $("#login").hide();
        $("#map").hide();
        $("#dash").show();
        $("#manag").hide();
      } else if ($(this).prop("id") === "btn-login") {
        $("#dash").hide();
        $("#map").show();
        $("#login").show();
        $("#manag").hide();
      } else if ($(this).prop("id") === "btn-manag") {
        $("#login").hide();
        $("#map").hide();
        $("#dash").hide();
        $("#manag").show();
        $("#btn-manage1").click();
      }
      return $('.nav-collapse').collapse('hide');
    });
    String.prototype.toProperCase = function() {
      return this.replace(/\w\S*/g, function(txt) {
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
      });
    };
    roundNumber = function(number, digits) {
      var multiple, rndedNum;
      multiple = Math.pow(10, digits);
      rndedNum = Math.round(number * multiple) / multiple;
      return rndedNum;
    };
    $("#dash").fadeOut(1);
    return $(".loading").fadeOut(2000);
  });

}).call(this);
